hostname R5
!
interface loopback 0
 ip address 172.20.182.9 255.255.255.255
 exit
!
ip domain-lookup
!
ip access-list extended blockalltraffic
 deny tcp 172.31.182.16 0.0.0.255 any eq 23
 deny tcp 172.31.182.16 0.0.0.255 any eq 22
 deny ip any 172.31.182.0 0.0.0.15
 permit ip 172.31.182.30 0.0.0.0 172.31.182.33 0.0.0.0
 permit ip 172.31.182.30 0.0.0.0 172.31.182.16 0.0.0.15
 deny ip 172.31.182.30 0.0.0.0 172.31.182.32 0.0.0.127
 permit ip any any
!
interface gi0/1
 ip address 172.31.182.67 255.255.255.240
 description connect to G0/3 of S2
 ip access-group blockalltraffic in
 cdp enable
 no shutdown
 exit
interface gi0/2
 ip address dhcp 
 description connect to Internet
 ip access-group blockalltraffic in
 cdp enable
 no shutdown
 exit
!
lldp run
!
router ospf 1
 network 172.31.182.67 0.0.0.0 area 0
 network dhcp 0.0.0.0 area 0
 default-information originate
 exit
!
ip route 0.0.0.0 0.0.0.0 g0/2
!
ip nat pool Public 192.168.122.129 192.168.122.254 netmask 255.255.255.128
!
access-list 1 permit 172.31.182.0 0.0.0.255
!
ip nat inside source list 1 pool Public  overload
!
interface g0/2
 ip nat outside
 exit
interface g0/1
 ip nat inside
 exit
